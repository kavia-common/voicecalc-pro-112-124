{"is_source_file": true, "format": "Kotlin", "description": "MainActivity.kt defines the main activity for the VoiceCalc Pro Android app. It manages the user interface, including calculator keypad, voice recognition via SpeechRecognizer, navigation drawer, and integration with an AI backend for expression evaluation. The file also includes supporting classes such as view model, history item, RecyclerView adapter, and an AI client for network communication.", "external_files": ["R.layout.activity_main", "R.layout.item_history", "R.string.nav_open_drawer", "R.string.nav_close_drawer", "R.string.menu_calculator", "R.string.menu_history", "R.string.app_name", "R.string.history_title", "R.string.speech_not_available", "R.string.empty_expression", "R.string.speech_error_generic", "R.string.no_transcription", "R.string.speech_error_message", "R.string.env_missing", "R.color.secondaryDark", "R.color.secondary"], "external_methods": ["androidx.appcompat.app.AppCompatActivity.setSupportActionBar", "androidx.drawerlayout.widget.DrawerLayout.addDrawerListener", "androidx.appcompat.app.ActionBarDrawerToggle", "setContentView", "findViewById", "setOnItemClickListener", "setOnClickListener", "setOnEditorActionListener", "addTextChangedListener", "notifyDataSetChanged", "Toast.makeText", "startListening", "stopListening"], "published": ["MainActivity", "CalcViewModel", "HistoryItem", "HistoryAdapter", "AiClient", "Env"], "classes": [{"name": "MainActivity", "description": "The main activity managing UI components, voice recognition, navigation, and backend integration."}, {"name": "CalcViewModel", "description": "ViewModel to store calculation history during activity lifecycle."}, {"name": "HistoryItem", "description": "Data class representing a calculator expression and its result."}, {"name": "HistoryAdapter", "description": "RecyclerView adapter for displaying calculation history."}, {"name": "AiClient", "description": "Handles HTTP communication with the AI backend for evaluating expressions."}, {"name": "Env", "description": "Utility object to retrieve environment variables from manifest or system environment."}], "methods": [{"name": "onCreate", "description": "Initializes UI, sets up speech recognition, navigation, and event handlers."}, {"name": "setupKeypad", "description": "Configures calculator keypad buttons."}, {"name": "startVoiceInputWithPermission", "description": "Checks permission and initiates voice recognition."}, {"name": "startVoiceRecognition", "description": "Starts listening for voice input and handles recognition callbacks."}, {"name": "stopListening", "description": "Stops and destroys speech recognizer."}, {"name": "onRequestPermissionsResult", "description": "Handles permission request results for recording audio."}, {"name": "showMainContent", "description": "Displays the calculator UI, hides history."}, {"name": "showHistory", "description": "Displays calculation history, hides calculator UI."}, {"name": "computeExpression", "description": "Evaluates the expression input using AI backend and updates UI with the result."}], "calls": ["AiClient.evaluateExpression", "HistoryAdapter.notifyDataSetChanged", "MicButton.setOnClickListener", "inputEditText.setOnEditorActionListener", "inputEditText.addTextChangedListener", "findViewById", "Toast.makeText", "speechRecognizer?.startListening", "speechRecognizer?.stopListening", "speechRecognizer?.destroy", "viewModel.addHistory", "setSupportActionBar", "setOnItemClickListener"], "search-terms": ["MainActivity", "voice recognition", "speech recognizer", "calculator keypad", "AI backend", "expression evaluation", "history list", "voice input", "Android Kotlin", "navigation drawer"], "state": 2, "file_id": 4, "knowledge_revision": 227, "git_revision": "", "revision_history": [{"9": ""}, {"70": ""}, {"71": ""}, {"74": ""}, {"75": ""}, {"76": ""}, {"79": ""}, {"177": ""}, {"203": ""}, {"220": ""}, {"223": ""}, {"224": ""}, {"225": ""}, {"226": ""}, {"227": ""}], "hash": "a7ea38627e6b9eaca166ee1bcec3b0ab", "format-version": 4, "code-base-name": "android_frontend", "filename": "android_frontend/app/src/main/kotlin/org/example/app/MainActivity.kt"}